{"version":3,"sources":["webpack:///./src/client/app/components/screens/auth/shared/AuthScreen.module.scss","webpack:///./src/client/app/components/screens/auth/LoginScreen/MarkupWrapper.jsx","webpack:///./src/client/app/components/screens/auth/LoginScreen/LoginScreen.jsx","webpack:///./src/client/app/components/screens/auth/LoginScreen/index.js"],"names":["module","exports","container","outer-box","inner-box","button-box","error","account","terms","container--screen_registration","MarkupWrapper_MarkupWrapper","_ref","children","encodedRedirectUrl","urlHelper","computeEncodedRedirectUrl","react_default","a","createElement","__source","fileName","_jsxFileName","lineNumber","className","AuthScreen_module_default","Link","to","href","target","rel","propTypes","prop_types_default","node","isRequired","LoginScreen_MarkupWrapper","LoginScreen_LoginScreen","state","username","password","handleInputChange","e","_this","setState","_defineProperty","name","value","handleSubmit","preventDefault","axios_default","post","then","response","storageHelper","setData","user","data","token","defaults","headers","common","Authorization","props","context","setUser","decodedParams","query_string_default","parse","window","location","search","history","push","redirectUrl","status","alert","Component","scrollTo","errorBox","LoginScreen_jsxFileName","this","onSubmit","type","onChange","placeholder","required","object","auth_LoginScreen_LoginScreen","__webpack_exports__"],"mappings":"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","file":"js/5.bundle.49e8219434322f3552aa.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"_container_143we\",\"outer-box\":\"_outer-box_2yCAt\",\"inner-box\":\"_inner-box_3ovxL\",\"button-box\":\"_button-box_2-Uz3\",\"error\":\"_error_3KfZZ\",\"account\":\"_account_13x4g\",\"terms\":\"_terms_2Bb_h\",\"container--screen_registration\":\"_container--screen_registration_1rc53\"};","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport urlHelper from '../../../../utils/urlHelper';\r\nimport styles from '../shared/AuthScreen.module.scss';\r\n\r\nconst MarkupWrapper = ({ children }) => {\r\n  const encodedRedirectUrl = urlHelper.computeEncodedRedirectUrl();\r\n\r\n  return (\r\n    <main>\r\n      <div className={styles.container}>\r\n        <div className={styles['outer-box']}>\r\n          <div className={styles['inner-box']}>\r\n            <h1>Welcome back.</h1>\r\n            <h2>Sign in to access your personalized homepage, follow authors and topics you love, and clap for stories that matter to you.</h2>\r\n\r\n            {children}\r\n\r\n            <div className={styles.account}>\r\n              No account?\r\n              {' '}\r\n              <Link to={`/register?redirectUrl=${encodedRedirectUrl}`}>Create one</Link>.\r\n            </div>\r\n            <div className={styles.terms}>\r\n              To make original Medium work, they(Medium team) log user data and share it with service providers. Click \"Sign in\" above to accept Mediumâ€™s\r\n              {' '}\r\n              <a href=\"https://medium.com/policy/medium-terms-of-service-9db0094a1e0f\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n                Terms of Service\r\n              </a>\r\n              {' & '}\r\n              <a href=\"https://medium.com/policy/medium-privacy-policy-f03bf92035c9\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n                Privacy Policy\r\n              </a>.\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </main>\r\n  );\r\n};\r\n\r\nMarkupWrapper.propTypes = {\r\n  children: PropTypes.node.isRequired,\r\n};\r\n\r\nexport default MarkupWrapper;\r\n\r\n/* eslint max-len: off */\r\n/* eslint react/no-unescaped-entities: off */\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport axios from 'axios';\r\nimport queryString from 'query-string';\r\n\r\nimport { contextShape } from '../../../../utils/context';\r\nimport storageHelper from '../../../../utils/storageHelper';\r\nimport MarkupWrapper from './MarkupWrapper';\r\n\r\nimport styles from '../shared/AuthScreen.module.scss';\r\n\r\nclass LoginScreen extends React.Component {\r\n  state = {\r\n    username: '',\r\n    password: '',\r\n    error: null,\r\n  }\r\n\r\n  componentDidMount() {\r\n    window.scrollTo(0, 0);\r\n  }\r\n\r\n  handleInputChange = (e) => {\r\n    this.setState({\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  }\r\n\r\n  handleSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    axios.post('/api/auth/login', {\r\n      username: this.state.username,\r\n      password: this.state.password,\r\n    })\r\n      .then((response) => {\r\n        storageHelper.setData({\r\n          user: response.data.user,\r\n          token: response.data.token,\r\n        });\r\n        axios.defaults.headers.common.Authorization = `Bearer ${response.data.token}`;\r\n        this.props.context.setUser(response.data.user);\r\n\r\n        const decodedParams = queryString.parse(window.location.search);\r\n        this.props.history.push(decodedParams.redirectUrl);\r\n      }, (error) => {\r\n        const isValidationError = error.response.status >= 400 && error.response.status < 500;\r\n        if (isValidationError) {\r\n          this.setState({ error: error.response.data.error });\r\n        } else {\r\n          // eslint-disable-next-line no-alert\r\n          window.alert(error);\r\n        }\r\n      });\r\n  }\r\n\r\n  render() {\r\n    const errorBox = (\r\n      <div className={styles.error}>\r\n        {this.state.error}\r\n      </div>\r\n    );\r\n\r\n    return (\r\n      <MarkupWrapper>\r\n        <form onSubmit={this.handleSubmit}>\r\n          <input type=\"text\" value={this.state.username} onChange={this.handleInputChange} name=\"username\" placeholder=\"Username\" required />\r\n          <input type=\"password\" value={this.state.password} onChange={this.handleInputChange} name=\"password\" placeholder=\"Password\" required />\r\n          <div className={styles['button-box']}>\r\n            <button className=\"btn btn--inverted\">Sign in</button>\r\n          </div>\r\n          {this.state.error && errorBox}\r\n        </form>\r\n      </MarkupWrapper>\r\n    );\r\n  }\r\n}\r\n\r\nLoginScreen.propTypes = {\r\n  history: PropTypes.object.isRequired,\r\n  context: contextShape.isRequired,\r\n};\r\n\r\nexport default LoginScreen;\r\n","import LoginScreen from './LoginScreen';\r\n\r\nexport default LoginScreen;\r\n"],"sourceRoot":""}